
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/ATL2001/spatial-polars/examples/reading_data/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../starting_from_a_polars_df/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Reading Spatial Data - Spatial Polars</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reading-spatial-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Spatial Polars" class="md-header__button md-logo" aria-label="Spatial Polars" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spatial Polars
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reading Spatial Data
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ATL2001/ATL2001/spatial-polars" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Spatial Polars" class="md-nav__button md-logo" aria-label="Spatial Polars" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"/></svg>

    </a>
    Spatial Polars
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ATL2001/ATL2001/spatial-polars" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial Polars
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Reading Spatial Data
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Reading Spatial Data
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scan_spatial" class="md-nav__link">
    <span class="md-ellipsis">
      scan_spatial()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="scan_spatial()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#collecting-the-lazyframe" class="md-nav__link">
    <span class="md-ellipsis">
      Collecting the LazyFrame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimizations" class="md-nav__link">
    <span class="md-ellipsis">
      Optimizations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-bbox-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      The bbox Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-mask-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      The mask Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-layer-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      The layer Parameter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_spatial" class="md-nav__link">
    <span class="md-ellipsis">
      read_spatial()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../starting_from_a_polars_df/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Starting From a Polars Dataframe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../writing_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Writing Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spatial_join/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial Joins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reprojection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reprojection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Expressions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Expressions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../expressions/single_geometry_column_input_expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Single geometry column input expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../expressions/geometry_column_and_scalar_geometry_input_expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geometry column and scalar geometry input expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../expressions/two_geometry_column_input_expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Two geometry column input expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../expressions/group_by_context_expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Group by Expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../expressions/spatial_filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial filter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Visualization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Visualization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualization/viz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualization/scatterplotlayer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ScatterPlotLayer (points)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualization/pathlayer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PathLayer (lines)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualization/polygonlayer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PolygonLayer (polygons)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpatialFrame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SpatialFrame
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpatialExpr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial Expressions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scan_spatial" class="md-nav__link">
    <span class="md-ellipsis">
      scan_spatial()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="scan_spatial()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#collecting-the-lazyframe" class="md-nav__link">
    <span class="md-ellipsis">
      Collecting the LazyFrame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimizations" class="md-nav__link">
    <span class="md-ellipsis">
      Optimizations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-bbox-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      The bbox Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-mask-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      The mask Parameter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-layer-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      The layer Parameter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_spatial" class="md-nav__link">
    <span class="md-ellipsis">
      read_spatial()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="reading-spatial-data">Reading Spatial Data</h1>
<p>Spatial polars provides an <a href="https://docs.pola.rs/user-guide/plugins/io_plugins/">IO plugin</a> that allows us to scan a spatial data into a lazyframe using the <a href="../../io/#spatial_polars.io.scan_spatial">scan_spatial</a>  function.  The <code>scan_spatial</code> function uses <a href="https://pyogrio.readthedocs.io/en/latest/introduction.html">pyogrio</a> under the hood to read the data, so <a href="https://pyogrio.readthedocs.io/en/latest/supported_formats.html">anything it can read</a>, spatial polars can read.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example makes use the <a href="https://geodatasets.readthedocs.io/en/latest/introduction.html">geodatasets</a> python package to access some spatial data easily.</p>
<p>Calling <code>geodatasets.get_path()</code> will download data the specified data to the machine and return the path to the downloaded file.  If the file has already been downloaded it will simply return the path to the file. 
<a href="https://geodatasets.readthedocs.io/en/latest/introduction.html#downloading-and-caching">See downloading and caching</a> for further details.</p>
</div>
<div class="language-py highlight"><span class="filename">Reading Spatial Data Setup</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">zipfile</span> <span class="c1"># (1)!</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">geodatasets</span> <span class="c1"># (2)!</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">polars</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pl</span> <span class="c1"># (3)!</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">shapely</span> <span class="c1"># (4)!</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">spatial_polars</span><span class="w"> </span><span class="kn">import</span> <span class="n">scan_spatial</span><span class="p">,</span> <span class="n">read_spatial</span> <span class="c1"># (5)!</span>
</span></code></pre></div>
<ol>
<li>This is just so we can peek inside a zip file it's unnecessary for a typical workflow</li>
<li>See note above about geodatasets, also not needed for a normal workflow</li>
<li>yup, we need polars!</li>
<li>You may or may not need shapely imported, we need it for the mask example below to make a shapely polygon.  If you aren't using it directly you wont need to import it.</li>
<li>The scan_spatial function is where the spatial polars magic starts, and read_spatial is helpful too</li>
</ol>
<p>We'll start by downloading the geoda.nyc_earnings dataset.</p>
<p>The data from geodatasets is zipped, but pyogrio has no issue reading directly out of a zip file, so there isn't any need to unzip anything first.  </p>
<p>Just to show what's inside the nyc_earnings dataset we'll just print out the contents of the zip file and see that there's a shapefile with all it's associated files.</p>
<div class="language-py highlight"><span class="filename">looking inside the geoda.nyc_earnings zip file</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">nyc_earnings_path</span> <span class="o">=</span> <span class="n">geodatasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda.nyc_earnings&quot;</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">nyc_earnings_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_file</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">zip_file</span><span class="o">.</span><span class="n">namelist</span><span class="p">():</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="l l-Scalar l-Scalar-Plain">NYC Area2010_2data.dbf</span><span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="l l-Scalar l-Scalar-Plain">__MACOSX/</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="l l-Scalar l-Scalar-Plain">__MACOSX/._NYC Area2010_2data.dbf</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="l l-Scalar l-Scalar-Plain">NYC Area2010_2data.prj</span><span class="w"> </span><span class="c1"># (2)!</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="l l-Scalar l-Scalar-Plain">__MACOSX/._NYC Area2010_2data.prj</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="l l-Scalar l-Scalar-Plain">NYC Area2010_2data.shp</span><span class="w"> </span><span class="c1"># (3)!</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="l l-Scalar l-Scalar-Plain">__MACOSX/._NYC Area2010_2data.shp</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="l l-Scalar l-Scalar-Plain">NYC Area2010_2data.shx</span><span class="w"> </span><span class="c1"># (4)!</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="l l-Scalar l-Scalar-Plain">__MACOSX/._NYC Area2010_2data.shx</span>
</span></code></pre></div>
<ol>
<li>Our shapefile's dbf of our tabular information</li>
<li>Our shapefile's coordinate system information</li>
<li>Our shapefile's geometries</li>
<li>Our shapefile's file that links the geometries and tabular information</li>
</ol>
<h2 id="scan_spatial">scan_spatial()</h2>
<p>To scan the data and produce a polars LazyFrame we use the <a href="../../io/#spatial_polars.io.scan_spatial">scan_spatial</a> function.  The cell below will produce a LazyFrame of the nyc earnings shapefile.  When we collect the schema, we'll see that it's got a lot of columns, the last of which is "geometry", a struct of our shapefile's geometry stored as WKB and CRS information.</p>
<div class="language-py highlight"><span class="filename">Scanning a zipped shapefile</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">nyc_earnings_lf</span> <span class="o">=</span> <span class="n">scan_spatial</span><span class="p">(</span><span class="n">geodatasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda.nyc_earnings&quot;</span><span class="p">))</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">nyc_earnings_lf</span><span class="o">.</span><span class="n">collect_schema</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="l l-Scalar l-Scalar-Plain">Schema([(&#39;STATEFP10&#39;, String),</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">(&#39;COUNTYFP10&#39;, Int64),</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">(&#39;TRACTCE10&#39;, String),</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">(&#39;BLOCKCE10&#39;, String),</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="l l-Scalar l-Scalar-Plain">...SNIP...</span><span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">(&#39;CE02_14&#39;, Int64),</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">(&#39;CE03_14&#39;, Int64),</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">(&#39;geometry&#39;,</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">Struct({&#39;wkb_geometry&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Binary, &#39;crs&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Categorical(ordering=&#39;physical&#39;)}))])</span><span class="w"> </span><span class="c1"># (2)!</span>
</span></code></pre></div>
<ol>
<li>There are 71 columns, but this documentation doesn't need to show them all <img alt="👅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f445.svg" title=":tongue:" /></li>
<li>This 'geometry' struct is the geometry from our data source, the 'wkb_geometry' field of the struct holds the geometry encoded as WKB, and the 'crs' field is the coordinate reference system for the geometries.</li>
</ol>
<h3 id="collecting-the-lazyframe">Collecting the LazyFrame</h3>
<p>To see the actual data, just like any other polars LazyFrame, we can collect the LazyFrame.</p>
<div class="language-py highlight"><span class="filename">Collecting a LazyFrame into a DataFrame</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">nyc_earnings_lf</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="s2">&quot;streaming&quot;</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(108_487, 71)</span><span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="l l-Scalar l-Scalar-Plain">┌───────────┬────────────┬───────────┬───────────┬───┬─────────┬─────────┬─────────┬───────────────┐</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="l l-Scalar l-Scalar-Plain">│ STATEFP10 ┆ COUNTYFP10 ┆ TRACTCE10 ┆ BLOCKCE10 ┆ … ┆ CE01_14 ┆ CE02_14 ┆ CE03_14 ┆ geometry      │</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="l l-Scalar l-Scalar-Plain">│ ---       ┆ ---        ┆ ---       ┆ ---       ┆   ┆ ---     ┆ ---     ┆ ---     ┆ ---           │</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="l l-Scalar l-Scalar-Plain">│ str       ┆ i64        ┆ str       ┆ str       ┆   ┆ i64     ┆ i64     ┆ i64     ┆ struct[2]     │</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="l l-Scalar l-Scalar-Plain">╞═══════════╪════════════╪═══════════╪═══════════╪═══╪═════════╪═════════╪═════════╪═══════════════╡</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 5          ┆ 051600    ┆ 5011      ┆ … ┆ 0       ┆ 0       ┆ 0       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 5          ┆ 030000    ┆ 4003      ┆ … ┆ 22      ┆ 38      ┆ 51      ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 5          ┆ 040900    ┆ 1001      ┆ … ┆ 1       ┆ 3       ┆ 0       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 5          ┆ 040900    ┆ 2000      ┆ … ┆ 327     ┆ 552     ┆ 733     ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 5          ┆ 041100    ┆ 1000      ┆ … ┆ 0       ┆ 0       ┆ 0       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="l l-Scalar l-Scalar-Plain">│ …         ┆ …          ┆ …         ┆ …         ┆ … ┆ …       ┆ …       ┆ …       ┆ …             │</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 002201    ┆ 2018      ┆ … ┆ 2       ┆ 1       ┆ 2       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="nn">...</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 000900    ┆ 1016      ┆ … ┆ 15      ┆ 21      ┆ 55      ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="l l-Scalar l-Scalar-Plain">└───────────┴────────────┴───────────┴───────────┴───┴─────────┴─────────┴─────────┴───────────────┘</span>
</span></code></pre></div>
<ol>
<li>That's 108K rows and 71 columns</li>
</ol>
<h3 id="optimizations">Optimizations</h3>
<p>Like all the polars provided <code>scan_*</code> functions, scan spatial will make use of <a href="https://docs.pola.rs/user-guide/lazy/optimizations/">polars optimizations</a> when the query is collected.  This can lead to dramatic speed improvements<img alt="🚀" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f680.svg" title=":rocket:" />, and reduce RAM consumption.</p>
<div class="language-py highlight"><span class="filename">Collecting a LazyFrame into a DataFrame with predicate/projection pushdown</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">nyc_earnings_df</span> <span class="o">=</span> <span class="n">nyc_earnings_lf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;COUNTYFP10&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">119</span> <span class="c1"># (1)!</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;COUNTYFP10&quot;</span><span class="p">),</span> 
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;NAME10&quot;</span><span class="p">),</span>  <span class="c1"># (2)!</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="s2">&quot;streaming&quot;</span><span class="p">)</span> <span class="c1"># (3)!</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">nyc_earnings_df</span><span class="p">)</span>
</span></code></pre></div>
<ol>
<li>This filter will limit the rows to just the ones where COUNTYFP10 is 119</li>
<li>This will limit the columns that are read from the shapefile to just these three</li>
<li>Give us a DataFrame that has only the rows we filtered on, and just the columns we selected</li>
</ol>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(15_081, 3)</span><span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="l l-Scalar l-Scalar-Plain">┌────────────┬────────────┬─────────────────────────────────┐</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="l l-Scalar l-Scalar-Plain">│ COUNTYFP10 ┆ NAME10     ┆ geometry                        │</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="l l-Scalar l-Scalar-Plain">│ ---        ┆ ---        ┆ ---                             │</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="l l-Scalar l-Scalar-Plain">│ i64        ┆ str        ┆ struct[2]                       │</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="l l-Scalar l-Scalar-Plain">╞════════════╪════════════╪═════════════════════════════════╡</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 1010 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 4005 ┆ {b&quot;\x01\x03\x00\x00\x00\x02\x0… │</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 3023 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 3016 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 4008 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="l l-Scalar l-Scalar-Plain">│ …          ┆ …          ┆ …                               │</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 2018 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 2017 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 2018 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 1005 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="l l-Scalar l-Scalar-Plain">│ 119        ┆ Block 1016 ┆ {b&quot;\x01\x03\x00\x00\x00\x01\x0… │</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="l l-Scalar l-Scalar-Plain">└────────────┴────────────┴─────────────────────────────────┘</span>
</span></code></pre></div>
<ol>
<li>Just a few rows and columns (remember, the shapefile has 108K rows and 71 columns).  Note that all the rows have COUNTYFP10 = 119 and obviously we only have three of the 71 columns</li>
</ol>
<div class="admonition note">
<p class="admonition-title">'Missing' parameters</p>
<p>Users that are familiar with pyogrio (or geopandas), may wonder why spatial polars has no "columns", "where", "fids", or "sql" parameters on the scan_spatial function.  These parameters are used by pygrio to limit the columns and rows that are read from a datasource.  Spatial polars operates differently.  Under the covers it does use the columns parameter from pyogrio, but instead of the user explicitly stating the columns in the scan_spatial function, polars will pass the columns needed for your query to pyogrio for you when it collects your query.  The where clause is different, polars expressions do not relate 1:1 to a where clause, so when the data is fetched by polars using the scan_spatial function, it will apply the polars predicate to each batch of records pyogrio reads before passing the records to the rest of the polars pipeline.</p>
</div>
<h3 id="the-bbox-parameter">The <code>bbox</code> Parameter</h3>
<p>The <code>scan_spatial</code> function also has the ability to apply a spatial filter to the input data to only read in features that intersect a specific area.  The bounding box' extent can be provided to the <code>bbox</code> parameter as a tuple of floats for the xmin, ymin, xmax, ymax.</p>
<div class="language-py highlight"><span class="filename">Spatial filter with the `bbox` parameter</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">nyc_earnings_lf2</span> <span class="o">=</span> <span class="n">scan_spatial</span><span class="p">(</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="n">geodatasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda.nyc_earnings&quot;</span><span class="p">),</span> 
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    <span class="n">bbox</span><span class="o">=</span><span class="p">(</span><span class="mi">1816900</span><span class="p">,</span> <span class="mi">639414</span><span class="p">,</span> <span class="mi">1817000</span><span class="p">,</span> <span class="mi">639668</span><span class="p">)</span> <span class="c1"># (1)!</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">nyc_earnings_lf2</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="s2">&quot;streaming&quot;</span><span class="p">))</span>
</span></code></pre></div>
<ol>
<li>Only give us the rows that intersect this bounding box when we collect.  These corrdinates are just some numbers chosen at random which produce a small number of rows in the resulting dataframe.</li>
</ol>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(4, 71)</span><span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="l l-Scalar l-Scalar-Plain">┌───────────┬────────────┬───────────┬───────────┬───┬─────────┬─────────┬─────────┬───────────────┐</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="l l-Scalar l-Scalar-Plain">│ STATEFP10 ┆ COUNTYFP10 ┆ TRACTCE10 ┆ BLOCKCE10 ┆ … ┆ CE01_14 ┆ CE02_14 ┆ CE03_14 ┆ geometry      │</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="l l-Scalar l-Scalar-Plain">│ ---       ┆ ---        ┆ ---       ┆ ---       ┆   ┆ ---     ┆ ---     ┆ ---     ┆ ---           │</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="l l-Scalar l-Scalar-Plain">│ str       ┆ i64        ┆ str       ┆ str       ┆   ┆ i64     ┆ i64     ┆ i64     ┆ struct[2]     │</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="l l-Scalar l-Scalar-Plain">╞═══════════╪════════════╪═══════════╪═══════════╪═══╪═════════╪═════════╪═════════╪═══════════════╡</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1010      ┆ … ┆ 0       ┆ 0       ┆ 0       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1022      ┆ … ┆ 2       ┆ 1       ┆ 2       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1006      ┆ … ┆ 16      ┆ 19      ┆ 28      ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1021      ┆ … ┆ 4       ┆ 4       ┆ 9       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="l l-Scalar l-Scalar-Plain">└───────────┴────────────┴───────────┴───────────┴───┴─────────┴─────────┴─────────┴───────────────┘</span>
</span></code></pre></div>
<ol>
<li>Just a 4 rows within that little box (remember, the shapefile has 108K rows and 71 columns)</li>
</ol>
<h3 id="the-mask-parameter">The <code>mask</code> Parameter</h3>
<p>We could use those same coordinates in the bbox example as a shapely polygon to get the same results thru the mask parameter.  If we had a shapely polygon that was a non-rectangle shape that would be ok also.</p>
<div class="language-py highlight"><span class="filename">Spatial filter with the mask parameter</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">mask_polygon</span> <span class="o">=</span> <span class="n">shapely</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span> <span class="c1"># (1)!</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="p">(</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>        <span class="p">(</span><span class="mi">1816900</span><span class="p">,</span> <span class="mi">639414</span><span class="p">),</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>        <span class="p">(</span><span class="mi">1816900</span><span class="p">,</span> <span class="mi">639668</span><span class="p">),</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>        <span class="p">(</span><span class="mi">1817000</span><span class="p">,</span> <span class="mi">639668</span><span class="p">),</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>        <span class="p">(</span><span class="mi">1817000</span><span class="p">,</span> <span class="mi">639414</span><span class="p">),</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>        <span class="p">(</span><span class="mi">1816900</span><span class="p">,</span> <span class="mi">639414</span><span class="p">),</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="p">)</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="p">)</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="n">nyc_earnings_lf3</span> <span class="o">=</span> <span class="n">scan_spatial</span><span class="p">(</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>    <span class="n">geodatasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda.nyc_earnings&quot;</span><span class="p">),</span> 
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>    <span class="n">mask</span><span class="o">=</span><span class="n">mask_polygon</span> <span class="c1"># (2)!</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="p">)</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">nyc_earnings_lf3</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="s2">&quot;streaming&quot;</span><span class="p">))</span>
</span></code></pre></div>
<ol>
<li>Make a polygon with the same coordinates as the bbox example above</li>
<li>Use the polygon to mask the reading of the data from the shapefile</li>
</ol>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(4, 71)</span><span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="l l-Scalar l-Scalar-Plain">┌───────────┬────────────┬───────────┬───────────┬───┬─────────┬─────────┬─────────┬───────────────┐</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="l l-Scalar l-Scalar-Plain">│ STATEFP10 ┆ COUNTYFP10 ┆ TRACTCE10 ┆ BLOCKCE10 ┆ … ┆ CE01_14 ┆ CE02_14 ┆ CE03_14 ┆ geometry      │</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="l l-Scalar l-Scalar-Plain">│ ---       ┆ ---        ┆ ---       ┆ ---       ┆   ┆ ---     ┆ ---     ┆ ---     ┆ ---           │</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="l l-Scalar l-Scalar-Plain">│ str       ┆ i64        ┆ str       ┆ str       ┆   ┆ i64     ┆ i64     ┆ i64     ┆ struct[2]     │</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="l l-Scalar l-Scalar-Plain">╞═══════════╪════════════╪═══════════╪═══════════╪═══╪═════════╪═════════╪═════════╪═══════════════╡</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1010      ┆ … ┆ 0       ┆ 0       ┆ 0       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1022      ┆ … ┆ 2       ┆ 1       ┆ 2       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1006      ┆ … ┆ 16      ┆ 19      ┆ 28      ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="l l-Scalar l-Scalar-Plain">│ 36        ┆ 119        ┆ 014701    ┆ 1021      ┆ … ┆ 4       ┆ 4       ┆ 9       ┆ {b&quot;\x01\x03\x │</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 00\x00\x00\x0 │</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="l l-Scalar l-Scalar-Plain">│           ┆            ┆           ┆           ┆   ┆         ┆         ┆         ┆ 1\x0…         │</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="l l-Scalar l-Scalar-Plain">└───────────┴────────────┴───────────┴───────────┴───┴─────────┴─────────┴─────────┴───────────────┘</span>
</span></code></pre></div>
<ol>
<li>Just the same 4 rows as the bbox example within that little mask polygon (remember, the shapefile has 108K rows and 71 columns)</li>
</ol>
<h3 id="the-layer-parameter">The layer Parameter</h3>
<p>Reading from a data source which contains more than one table is accomplished with the <code>layer</code> parameter.</p>
<p>geoda.milwaukee1 from geodatasets is a geopackage.  Geopackages are SQLite databases which can contain more than one table.</p>
<div class="language-py highlight"><span class="filename">Using the layer parameter</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">layer_param_df</span> <span class="o">=</span> <span class="n">scan_spatial</span><span class="p">(</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    <span class="n">geodatasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda.milwaukee1&quot;</span><span class="p">),</span> 
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;wi_final_census2_random4&quot;</span> <span class="c1"># (1)!</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="s2">&quot;streaming&quot;</span><span class="p">)</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">layer_param_df</span><span class="p">)</span>
</span></code></pre></div>
<ol>
<li>Because there is more than one table in the geopackage we need to tell scan_spatial which table to read from.</li>
</ol>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(417, 35)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="l l-Scalar l-Scalar-Plain">┌─────────────┬───────────┬─────────┬────────┬───┬──────────┬──────────┬────────┬──────────────────┐</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="l l-Scalar l-Scalar-Plain">│ FIPS        ┆ MSA       ┆ TOT_POP ┆ POP_16 ┆ … ┆ PCTBLACK ┆ PCTBLCK  ┆ polyid ┆ geometry         │</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="l l-Scalar l-Scalar-Plain">│ ---         ┆ ---       ┆ ---     ┆ ---    ┆   ┆ ---      ┆ ---      ┆ ---    ┆ ---              │</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="l l-Scalar l-Scalar-Plain">│ str         ┆ str       ┆ i32     ┆ i32    ┆   ┆ f32      ┆ f32      ┆ i16    ┆ struct[2]        │</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="l l-Scalar l-Scalar-Plain">╞═════════════╪═══════════╪═════════╪════════╪═══╪══════════╪══════════╪════════╪══════════════════╡</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131430100 ┆ Milwaukee ┆ 5068    ┆ 1248   ┆ … ┆ 0.860631 ┆ 0.000987 ┆ 1      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="l l-Scalar l-Scalar-Plain">│ 55089610100 ┆ Milwaukee ┆ 8003    ┆ 1812   ┆ … ┆ 0.005959 ┆ 0.004373 ┆ 2      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131410100 ┆ Milwaukee ┆ 4393    ┆ 1026   ┆ … ┆ 0.030012 ┆ 0.000455 ┆ 3      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131400101 ┆ Milwaukee ┆ 7687    ┆ 1801   ┆ … ┆ 0.141892 ┆ 0.000781 ┆ 4      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131420104 ┆ Milwaukee ┆ 5086    ┆ 1065   ┆ … ┆ 0.010384 ┆ 0.012584 ┆ 5      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="l l-Scalar l-Scalar-Plain">│ …           ┆ …         ┆ …       ┆ …      ┆ … ┆ …        ┆ …        ┆ …      ┆ …                │</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079160201 ┆ Milwaukee ┆ 8476    ┆ 1619   ┆ … ┆ 0.973236 ┆ 0.040349 ┆ 413    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="l l-Scalar l-Scalar-Plain">│ 55133203900 ┆ Milwaukee ┆ 7705    ┆ 1771   ┆ … ┆ 0.0      ┆ 0.004932 ┆ 414    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079160202 ┆ Milwaukee ┆ 6169    ┆ 1532   ┆ … ┆ 0.000759 ┆ 0.01232  ┆ 415    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079160300 ┆ Milwaukee ┆ 7398    ┆ 1915   ┆ … ┆ 0.007703 ┆ 0.022979 ┆ 416    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079150400 ┆ Milwaukee ┆ 1092    ┆ 212    ┆ … ┆ 0.739302 ┆ 0.0      ┆ 417    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="l l-Scalar l-Scalar-Plain">└─────────────┴───────────┴─────────┴────────┴───┴──────────┴──────────┴────────┴──────────────────┘</span>
</span></code></pre></div>
<h2 id="read_spatial">read_spatial()</h2>
<p>Additionally, spatial polars also has a <a href="../../io/#spatial_polars.io.read_spatial">read_spatial</a> function which will simply call <code>scan_spatial</code> and then call <code>.collect(engine="streaming")</code> to return a dataframe with all the columns and rows of a datasource.</p>
<div class="language-py highlight"><span class="filename">read_spatial</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">read_df</span> <span class="o">=</span> <span class="n">read_spatial</span><span class="p">(</span> 
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>    <span class="n">geodatasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda.milwaukee1&quot;</span><span class="p">),</span> 
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>    <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;wi_final_census2_random4&quot;</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="p">)</span> <span class="c1"># (1)!</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">read_df</span><span class="p">)</span>
</span></code></pre></div>
<ol>
<li>No need to collect anything, read_spatial does that for you</li>
</ol>
<div class="language-yaml no-copy highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(417, 35)</span><span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="l l-Scalar l-Scalar-Plain">┌─────────────┬───────────┬─────────┬────────┬───┬──────────┬──────────┬────────┬──────────────────┐</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="l l-Scalar l-Scalar-Plain">│ FIPS        ┆ MSA       ┆ TOT_POP ┆ POP_16 ┆ … ┆ PCTBLACK ┆ PCTBLCK  ┆ polyid ┆ geometry         │</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="l l-Scalar l-Scalar-Plain">│ ---         ┆ ---       ┆ ---     ┆ ---    ┆   ┆ ---      ┆ ---      ┆ ---    ┆ ---              │</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="l l-Scalar l-Scalar-Plain">│ str         ┆ str       ┆ i32     ┆ i32    ┆   ┆ f32      ┆ f32      ┆ i16    ┆ struct[2]        │</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="l l-Scalar l-Scalar-Plain">╞═════════════╪═══════════╪═════════╪════════╪═══╪══════════╪══════════╪════════╪══════════════════╡</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131430100 ┆ Milwaukee ┆ 5068    ┆ 1248   ┆ … ┆ 0.860631 ┆ 0.000987 ┆ 1      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="l l-Scalar l-Scalar-Plain">│ 55089610100 ┆ Milwaukee ┆ 8003    ┆ 1812   ┆ … ┆ 0.005959 ┆ 0.004373 ┆ 2      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131410100 ┆ Milwaukee ┆ 4393    ┆ 1026   ┆ … ┆ 0.030012 ┆ 0.000455 ┆ 3      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131400101 ┆ Milwaukee ┆ 7687    ┆ 1801   ┆ … ┆ 0.141892 ┆ 0.000781 ┆ 4      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="l l-Scalar l-Scalar-Plain">│ 55131420104 ┆ Milwaukee ┆ 5086    ┆ 1065   ┆ … ┆ 0.010384 ┆ 0.012584 ┆ 5      ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="l l-Scalar l-Scalar-Plain">│ …           ┆ …         ┆ …       ┆ …      ┆ … ┆ …        ┆ …        ┆ …      ┆ …                │</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079160201 ┆ Milwaukee ┆ 8476    ┆ 1619   ┆ … ┆ 0.973236 ┆ 0.040349 ┆ 413    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="l l-Scalar l-Scalar-Plain">│ 55133203900 ┆ Milwaukee ┆ 7705    ┆ 1771   ┆ … ┆ 0.0      ┆ 0.004932 ┆ 414    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079160202 ┆ Milwaukee ┆ 6169    ┆ 1532   ┆ … ┆ 0.000759 ┆ 0.01232  ┆ 415    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079160300 ┆ Milwaukee ┆ 7398    ┆ 1915   ┆ … ┆ 0.007703 ┆ 0.022979 ┆ 416    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a><span class="l l-Scalar l-Scalar-Plain">│ 55079150400 ┆ Milwaukee ┆ 1092    ┆ 212    ┆ … ┆ 0.739302 ┆ 0.0      ┆ 417    ┆ {b&quot;\x01\x03\x00\ │</span>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="l l-Scalar l-Scalar-Plain">│             ┆           ┆         ┆        ┆   ┆          ┆          ┆        ┆ x00\x00\x01\x0…  │</span>
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a><span class="l l-Scalar l-Scalar-Plain">└─────────────┴───────────┴─────────┴────────┴───┴──────────┴──────────┴────────┴──────────────────┘</span>
</span></code></pre></div>
<ol>
<li>
<p class="annotate">Exactly the same results as <code>scan_spatial().collect(engine="streaming")</code> (1)</p>
<ol>
<li>Because that's exactly what it's doing <img alt="😄" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f604.svg" title=":smile:" /> </li>
</ol>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../assets/_markdown_exec_pyodide.js"></script>
      
    
  </body>
</html>